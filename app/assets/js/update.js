const $=require("jquery"),ipcRenderer=require("electron").ipcRenderer,settings=require("electron-settings"),handlebars=require("handlebars"),i18n=require("i18n"),package=require(__dirname+"/../../package.json");i18n.configure({locale:"update",directory:__dirname+"/../locales/"+settings.get("lang")+"/"}),handlebars.registerHelper("i18n",function(e){return i18n.__({phrase:e,locale:"update"})});let template=handlebars.compile(document.documentElement.innerHTML);document.documentElement.innerHTML=template(),ipcRenderer.on("updateInfo",(e,r)=>{$("h5").append(r.new+" :"),$(".changelog").html(r.note)}),ipcRenderer.on("updateProgress",(e,r)=>{let n=Math.round(r.percent)+"%";$(".progress-bar").css("width",n).html(n),$(".message").html(r.transferred+" Mb / "+r.total+" Mb")}),ipcRenderer.on("updateProgressFinish",(e,r)=>{r&&$(".message").html(i18n.__({phrase:"update_finish",locale:"update"}))});